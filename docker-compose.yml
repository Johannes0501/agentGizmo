version: "3.8"

services:
  agent-zero:
    image: agent0ai/agent-zero
    container_name: agent-zero
    restart: unless-stopped
    ports:
      - "50001:80"
    volumes:
      - ./data/agent-zero:/app/data
      # Persist settings, memory, and prompts
      - ./data/agent-zero/tmp:/a0/tmp
      - ./data/agent-zero/memory:/a0/memory
      - ./data/agent-zero/prompts:/a0/prompts
      # Custom branding
      - ./custom/webui/index.html:/a0/webui/index.html:ro
      - ./custom/webui/public/favicon.svg:/a0/webui/public/favicon.svg:ro
      - ./custom/webui/public/icon.svg:/a0/webui/public/icon.svg:ro
      - ./custom/webui/components/welcome/welcome-screen.html:/a0/webui/components/welcome/welcome-screen.html:ro
    environment:
      - ALLOWED_ORIGINS=https://gizmo.xn--datastrm-c5a.com,https://gizmo.datastr√∏m.com,*://localhost:*,*://127.0.0.1:*
    networks:
      - gizmo-net

  authelia:
    image: authelia/authelia:latest
    container_name: authelia
    restart: unless-stopped
    ports:
      - "9091:9091"
    volumes:
      - ./authelia:/config
    environment:
      - TZ=Europe/Copenhagen
    networks:
      - gizmo-net

  redis:
    image: redis:alpine
    container_name: authelia-redis
    restart: unless-stopped
    volumes:
      - ./data/redis:/data
    networks:
      - gizmo-net

networks:
  gizmo-net:
    driver: bridge
